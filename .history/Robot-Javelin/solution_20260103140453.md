# Robot Javelin — My Full Solution & Reasoning

## Problem (([Robot Javelin](https://www.janestreet.com/puzzles/robot-javelin-index/)))

Two players compete head-to-head. Each makes an initial throw, a real number drawn uniformly from $[0,1]$. After seeing only their own value, each may either keep it or erase it and take a second throw (also uniform on $[0,1]$), which must be kept. The player with the larger final value wins.

In the standard version of the game, both players play optimally and the game settles into a Nash equilibrium. In this puzzle, however, Spears Robot gains an advantage: before deciding whether to reroll, it receives one bit of information telling it whether its opponent’s **first** throw is above or below a chosen threshold $d$. Spears chooses $d$ to maximise its winning probability, assuming its opponent still plays the equilibrium strategy.

The task is to adjust Java-lin’s strategy optimally, given this leak, and compute Java-lin’s resulting probability of winning.

---

## Problem Summary

Each player gets at most one reroll. Decisions are made without seeing the opponent’s value. The only asymmetry is that Spears learns one bit about Java-lin’s first throw.

---

## Key Insight: Why Strategies Must Be Thresholds

The first thing to understand is what form an optimal strategy could take.

If I am willing to keep a value like $0.62$, it would be irrational to reroll a strictly better value such as $0.65$. Likewise, if I reroll at $0.4$, I should also reroll at $0.3$. This forces any reasonable strategy to switch behaviour exactly once.

Therefore, the decision to keep or reroll must be based on a single cutoff value: keep values above it, reroll values below it. I found it helpful to think visually of the interval $[0,1]$ as a number line, splitting spaces into sections based on threshold values.

This reduces the problem to analysing threshold strategies and comparing outcomes at the boundary.

---

## Baseline Game Equilibrium (No Leak)

Assume both players use a cutoff $t$:

- keep the first throw if it is at least $t$,
- otherwise reroll.

To find the equilibrium value of $t$, consider what happens exactly at the boundary. If keeping were better at $t$, the cutoff should be lower; if rerolling were better, it should be higher. Thus, at equilibrium, a player must be indifferent between the two actions when their first throw equals $t$.

### Winning Probability If I Keep $t$

If I keep $t$, I win only if my opponent’s final value is less than $t$.

For this to happen:

- their first throw must be below $t$ (probability $t$),
- and their reroll must also be below $t$ (probability $t$).

These events are independent, so

$$
P(\text{opponent final} < t) = t^2.
$$

This is because the opponent must lose twice.

---

### Winning Probability If I Reroll $t$

If I reroll, my final value $U$ is uniform on $[0,1]$. My opponent:

- rerolls with probability $t$, in which case both final values are fresh and symmetric, so I win with probability $1/2$;
- keeps with probability $1-t$, in which case their final value lies in $[t,1]$.

Averaging over these cases gives

$$
P(\text{Win by reroll}) = t \cdot \frac12 + (1-t)\cdot \frac{1-t}{2}.
$$

A key point here is that rerolling does **not** reset the game: only my value resets, while the opponent remains strategic.

---

### Solving For Equilibrium Cutoff

Equating the two win probabilities at the boundary:

$$
t^2 = \frac{t}{2} + \frac{(1-t)^2}{2}.
$$

This simplifies to

$$
t^2 + t - 1 = 0,
$$

which yields

$$
t = \frac{\sqrt{5}-1}{2} \approx 0.618.
$$

This is the equilibrium cutoff that Spears assumes Java-lin is using.

---

## Exploiting The Leak

Spears is allowed to choose a threshold $d$ and learn whether my first throw is above or below it.

Since my behaviour changes exactly at $t$, the most informative choice is

$$
d = t.
$$

Any other threshold would mix together outcomes where I reroll and outcomes where I keep, providing less useful information.

---

## Spears’ Optimal Response

Once Spears receives the bit, it adjusts its own cutoff.

### Case 1: Leak Says My First Throw Is Below $t$

Spears believes I will reroll, so my final value is uniform on $[0,1]$.

If Spears keeps a value $x$, it wins with probability $x$. If it rerolls, it wins with probability $1/2$. Therefore, Spears keeps iff $x \ge 1/2$, giving

$$
c_0 = \frac12.
$$

---

### Case 2: Leak Says My First Throw Is At Least $t$

Spears believes I will keep, so my final value is uniform on $[t,1]$.

If Spears keeps a value $x \ge t$, the probability it beats me is the fraction of the interval $[t,1]$ lying below $x$:

$$
P(\text{Win | keep }x) = \frac{x - t}{1 - t}.
$$

If Spears rerolls to a value $U$, then for a fixed opponent value $Y$,

$$
P(U > Y) = 1 - Y.
$$

Since $Y$ is uniform on $[t,1]$, its expected value is the midpoint,

$$
\mathbb{E}[Y] = \frac{t+1}{2},
$$

and hence

$$
P(\text{Win | reroll}) = \mathbb{E}[1-Y] = \frac{1-t}{2}.
$$

Comparing these gives a higher cutoff

$$
c_1 = t + \frac{(1-t)^2}{2} = \frac{5-\sqrt{5}}{4} \approx 0.691.
$$

---

## Best Response: Adjusting My Strategy

Spears assumes I reroll whenever my first throw is below $t$. I can exploit this by keeping some values below $t$, causing Spears to use the weaker cutoff $c_0$ when it should not.

I therefore choose a new cutoff $a < t$.

At the boundary $a$, Spears’ behaviour is fixed (it still uses $c_0$), so I again apply boundary indifference: the probability of winning by keeping $a$ must equal the probability of winning by rerolling.

Against $c_0 = 1/2$, the win probability if I keep $a > 1/2$ is

$$
\frac12 a + (a - \tfrac12).
$$

The win probability if I reroll is $3/8$, reflecting the fact that Spears often keeps values above $1/2$.

Equating:

$$
\frac{3a}{2} - \frac12 = \frac38
\quad\Rightarrow\quad
a = \frac{7}{12}.
$$

---

## Final Win Probability

With all strategies fixed, the overall probability of winning is obtained by averaging over my first throw $y$, splitting into three regions:

- $y < a$: I reroll, Spears uses $c_0$,
- $a \le y < t$: I keep, Spears still uses $c_0$,
- $y \ge t$: I keep, Spears uses $c_1$.

Carrying out this piecewise averaging gives the exact result

$$
P(\text{Win}) = \frac{229}{192} - \frac{5\sqrt{5}}{16}
\approx 0.4939370904.
$$

---

## Reflection

The main trap in this problem is assuming that rerolling resets the game, when in reality, only one player’s value resets; the opponent’s strategy and conditioning remain. Recognising this asymmetry is what makes rerolling strictly worse than keeping in some cases, even when both final values are random.
